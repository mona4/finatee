if (self.CavalryLogger) { CavalryLogger.start_js(["XJDgG"]); }

__d("PUWErrorCodes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904};},null);
__d('Emscripten',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={isSupported:function(){return (typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set);}};},null);
__d('PooledWebWorker',['WebWorker'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('WebWorker'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,m);this.$PooledWebWorker1=l;this.$PooledWebWorker2=k;}j.prototype.getIndex=function(){'use strict';return this.$PooledWebWorker1;};j.prototype.getPool=function(){'use strict';return this.$PooledWebWorker2;};f.exports=j;},null);
__d('WebWorkerPool',['PooledWebWorker','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();h.isSupported=function(){'use strict';return c('PooledWebWorker').isSupported();};function h(i,j){'use strict';this.$WebWorkerPool1=[];for(var k=0;k<j;k++)this.$WebWorkerPool1.push(new (c('PooledWebWorker'))(this,k,i).setErrorHandler(this.$WebWorkerPool2).setMessageHandler(this.$WebWorkerPool3).execute());this.$WebWorkerPool4=0;}h.prototype.setMessageHandler=function(i){'use strict';this.$WebWorkerPool5=i||c('emptyFunction');return this;};h.prototype.setAllowCrossPageTransition=function(i){'use strict';this.$WebWorkerPool1.forEach(function(j){return j.setAllowCrossPageTransition(i);});return this;};h.prototype.setErrorHandler=function(i){'use strict';this.$WebWorkerPool6=i||c('emptyFunction');return this;};h.prototype.postMessage=function(){'use strict';var i=this.getWorker();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];i.postMessage.apply(i,k);return i;};h.prototype.$WebWorkerPool3=function(){'use strict';for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);this.getPool().$WebWorkerPool5.apply(this.getPool(),j);};h.prototype.$WebWorkerPool2=function(){'use strict';for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);return this.getPool().$WebWorkerPool6.apply(this.getPool(),j);};h.prototype.getWorker=function(){'use strict';var i=this.$WebWorkerPool1[this.$WebWorkerPool4];this.$WebWorkerPool4=(this.$WebWorkerPool4+1)%this.$WebWorkerPool1.length;return i;};f.exports=h;},null);
__d('JpegResizer',['Emscripten','JpegResizerConfig','JpegResizeWorkerResource','WebWorker','WebWorkerPool','PUWErrorCodes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;i.isSupported=function(){'use strict';return c('WebWorkerPool').isSupported()&&c('Emscripten').isSupported()&&!c('JpegResizerConfig').isGKBlacklisted;};i.getSingleton=function(j){'use strict';if(!h)h=new i(j||i.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return h;};i.prepareResource=function(j){'use strict';c('WebWorker').prepareResource(c('JpegResizeWorkerResource'),j);};function i(j){'use strict';j=j||i.DEFAULT_POOL_SIZE;c('WebWorker').prepareResource(c('JpegResizeWorkerResource'));this.$JpegResizer1=new (c('WebWorkerPool'))(c('JpegResizeWorkerResource'),j).setErrorHandler(this.$JpegResizer2.bind(this)).setMessageHandler(this.$JpegResizer3.bind(this));this.$JpegResizer4={};this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH;}i.prototype.setHighQuality=function(j){'use strict';if(j){this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH;}else{this.$JpegResizer5=i.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer6=i.LOW_QUALITY_RESIZE_WIDTH;}return this;};i.prototype.setAllowCrossPageTransition=function(j){'use strict';this.$JpegResizer1.setAllowCrossPageTransition(j);return this;};i.prototype.resizeBlob=function(j,k,l){'use strict';return this.$JpegResizer7(j,this.$JpegResizer6,this.$JpegResizer5,k,l);};i.prototype.resize360Blob=function(j,k,l){'use strict';return this.$JpegResizer7(j,this.$JpegResizer6*4,this.$JpegResizer5*4,k,l);};i.prototype.$JpegResizer7=function(j,k,l,m,n){'use strict';var o=this.$JpegResizer1.getWorker();if(o.isCurrentState('terminated')){var p=new Error('Worker terminated');p.code=c('PUWErrorCodes').WORKER_TERMINATED;m(p);return this;}var q=o.postMessage({blob:j,height:l,width:k}).getIndex();this.$JpegResizer8(q).unshift({done:m,progress:n});return this;};i.prototype.$JpegResizer8=function(j){'use strict';if(!this.$JpegResizer4.hasOwnProperty(j))this.$JpegResizer4[j]=[];return this.$JpegResizer4[j];};i.prototype.$JpegResizer2=function(j,k){'use strict';j.terminate();var l=this.$JpegResizer8(j.getIndex());this.$JpegResizer9(k);l.forEach(function(m){return m.done(k);});l.length=0;};i.prototype.$JpegResizer3=function(j,k){'use strict';if(k.error)this.$JpegResizer9(k.error);if(k.done){this.$JpegResizer8(j.getIndex()).pop().done(k.error,k.blob,k.skipped);}else{var l=this.$JpegResizer8(j.getIndex()),m=l[l.length-1].progress;if(m)m({written:k.written,total:k.total});}};i.prototype.$JpegResizer9=function(j){'use strict';var k=j.message;if(k.indexOf('Not a JPEG file')!==-1){j.code=c('PUWErrorCodes').BAD_JPEG;}else if(k.indexOf('abort()')!==-1){j.code=c('PUWErrorCodes').WORKER_ABORT;}else j.code=c('PUWErrorCodes').UNKNOWN_RESIZE_ERROR;};i.DEFAULT_POOL_SIZE=3;i.DEFAULT_RESIZE_HEIGHT=2048;i.DEFAULT_RESIZE_WIDTH=2048;i.LOW_QUALITY_RESIZE_HEIGHT=960;i.LOW_QUALITY_RESIZE_WIDTH=960;f.exports=i;},null);
__d('PhotoEditorSaveStates',['requireWeak','Map'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;c('requireWeak')('PhotoEditorGraphic',function(l){h=l.Sticker;});var i=new (c('Map'))(),j=new (c('Map'))(),k={setState:function(l,m){i.set(l,m);},getState:function(l){return i.get(l);},setLoggingData:function(l,m){j.set(l,m);},getLoggingData:function(l){return j.get(l);},getTotalNumOfStickersOnPhoto:function(l){if(i.get(l))return i.get(l).graphics.filter(function(m){return h&&m.type===h;}).length;return 0;}};f.exports=k;},null);
__d('ReactComposerMediaUploadType',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PHOTO:'PHOTO',VIDEO:'VIDEO'};},null);
__d('ReactComposerPhotoActions',['ReactComposerPhotoActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPhotoStore');var h={startRecognizing:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,photoID:j,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_STARTED});},finishRecognizingPhoto:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_FINISHED,photoID:j});},finishRecognizing:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED,photos:j,facerecWaterfallEvent:k});},addFacebox:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX,photoID:j,facebox:k});},tagXY:function(i,j,k,l,m,n,o){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_TAG_XY,value:k,photoID:j,source:l,subject:m,x:n,y:o});},tagXYProduct:function(i,j,k,l,m,n,o){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT,value:k,photoID:j,source:l,subject:m,x:n,y:o});},tagFacebox:function(i,j,k,l,m){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX,photoID:j,faceboxID:k,subjectID:l,value:m});},untagFacebox:function(i,j,k,l){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX,photoID:j,faceboxID:k,subjectID:l});},removePhoto:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_REMOVE,photoID:j,uploadID:k});},untagSubjectFromAllPhotos:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:j});},untagAllForPhoto:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL,photoID:j});},startPhotoEdit:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,photoID:j,type:c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED});},finishPhotoEdit:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_EDIT_FINISHED});},setPhotoBeingTagged:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,photoID:j,type:c('ReactComposerPhotoActionType').PHOTO_SET_BEING_TAGGED});},finishLoadingPhotoEdit:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoActionType').PHOTO_LOADING_EDIT_FINISHED,photoID:j});}};f.exports=h;},null);
__d('ReactComposerPhotoPrefillConfig',['React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;f.exports=h.shape({uploadID:h.string,photoID:h.string,thumbSrc:h.string});},null);
__d('ReactComposerPhotoUploadState',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PHOTO_UPLOAD_ENQUEUED:'PHOTO_UPLOAD_ENQUEUED',PHOTO_UPLOAD_RESIZE_STARTED:'PHOTO_UPLOAD_RESIZE_STARTED',PHOTO_UPLOAD_RESIZE_DONE:'PHOTO_UPLOAD_RESIZE_DONE',PHOTO_UPLOAD_RESIZE_FAILED:'PHOTO_UPLOAD_RESIZE_FAILED',PHOTO_UPLOAD_UPLOADING:'PHOTO_UPLOAD_UPLOADING',PHOTO_UPLOAD_DONE:'PHOTO_UPLOAD_DONE',PHOTO_UPLOAD_FAILED:'PHOTO_UPLOAD_FAILED'};},null);
__d('ReactComposerMediaUploadActions',['ReactComposerDispatcher','ReactComposerMediaUploadType','ReactComposerPhotoPrefillConfig','ReactComposerPhotoActions','ReactComposerPhotoUploadState','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={enqueue:function(i,j,k,l,m,n,o){var p=arguments.length<=7||arguments[7]===undefined?[]:arguments[7],q=arguments.length<=8||arguments[8]===undefined?false:arguments[8];c('ReactComposerDispatcher').dispatch({composerID:i,mediaType:n,uploadID:j,type:m,filename:k,fileURL:o?o:'',index:l,xyTags:p,isSpherical:q});},startResizing:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,loggingData:k,uploadID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED});},progressResizing:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_PROGRESS,progress:k});},doneResizing:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,loggingData:k,uploadID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE});},failResizing:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,loggingData:k,uploadID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED});},startUploading:function(i,j,k,l){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,type:l,fileUpload:k});},progressUploading:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_PROGRESS,progress:k});},isSpherical:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_IS_SPHERICAL,isSpherical:k});},doneUploading:function(i,j,k,l,m,n,o,p,q,r,s,t,u){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,fileUpload:l,mediaLocation:q,timeToUpload:m,type:k,photoID:n,thumbSrc:o,originalPhotoID:p,cubestripURI:r,imageSrc:s,width:t,height:u});},failUploading:function(i,j,k,l,m,n){c('ReactComposerDispatcher').dispatch({composerID:i,uploadID:j,type:n,error:m,fileUpload:k,timeToUpload:l});},removeAllPhotoUploads:function(i){c('ReactComposerMediaUploadStore').getUploadsOfType(i,c('ReactComposerMediaUploadType').PHOTO).forEach(function(j){return this.removePhotoAndPhotoUpload(i,j);}.bind(this));},removePhotoAndPhotoUpload:function(i,j){if(j.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE){c('ReactComposerPhotoActions').removePhoto(i,j.photoID,j.id);}else this.removeMediaUpload(i,j.id);},removeMediaUpload:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE,uploadID:j});},mediaMoved:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_MOVED,from:j,to:k});},inputClicked:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_INPUT_CLICKED});},resizerUnavailable:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZER_UNAVAILABLE});},photosSelect:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,method:k,numPhotos:j,type:c('ReactComposerMediaUploadActionType').PHOTOS_SELECT});},retryMediaUpload:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:j});},prefillPhotos:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,photos:j,type:c('ReactComposerMediaUploadActionType').PREFILL_PHOTOS});},setVideoThumbnail:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaUploadActionType').VIDEO_SET_THUMBNAIL,thumbSrc:k,uploadID:j});}};f.exports=h;},null);
__d('ReactComposerPhotoUpload',['immutable'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('immutable').Record({id:null,error:{},filename:null,fileUpload:null,fileURL:null,photoID:null,originalPhotoID:null,progress:null,state:null,xyTags:[],mediaType:null,isSpherical:false,thumbSrc:null});},null);
__d('ReactComposerMediaUploadStore',['ReactComposerDispatcher','ReactComposerMediaUploadType','ReactComposerStoreBase','ReactComposerMediaUploadActionType','ReactComposerPhotoUploadState','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerPhotoUpload','ReactComposerVideoXUploader','immutable','PhotoEditorSaveStates'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {removedIDs:c('immutable').Set(),uploads:c('immutable').List(),uploadsByID:c('immutable').Map(),videoUploader:null};},function(l){if(k&&k.$ReactComposerMediaUploadStore1(l))return;switch(l.type){case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_ENQUEUED:k&&k.$ReactComposerMediaUploadStore2(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED:k&&k.$ReactComposerMediaUploadStore3(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_PROGRESS:k&&k.$ReactComposerMediaUploadStore4(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE:k&&k.$ReactComposerMediaUploadStore5(l,c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_DONE);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED:k&&k.$ReactComposerMediaUploadStore5(l,c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_FAILED);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_UPLOADING:k&&k.$ReactComposerMediaUploadStore6(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_IS_SPHERICAL:k&&k.$ReactComposerMediaUploadStore7(l);break;case c('ReactComposerMediaUploadActionType').VIDEO_SET_THUMBNAIL:k&&k.$ReactComposerMediaUploadStore8(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_PROGRESS:k&&k.$ReactComposerMediaUploadStore4(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_DONE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerMediaUploadStore9(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_FAILED:k&&k.$ReactComposerMediaUploadStore10(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE:case c('ReactComposerPhotoActionType').PHOTO_REMOVE:k&&k.$ReactComposerMediaUploadStore11(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_MOVED:k&&k.$ReactComposerMediaUploadStore12(l);break;case c('ReactComposerMediaUploadActionType').PREFILL_PHOTOS:k&&k.$ReactComposerMediaUploadStore13(l);break;default:}});k=this;}j.prototype.getMediaUploadExists=function(k,l){'use strict';var m=this.getComposerData(k);return m.uploadsByID.get(l)!==undefined;};j.prototype.getMediaUpload=function(k,l){'use strict';return this.$ReactComposerMediaUploadStore14(this.getComposerData(k),l);};j.prototype.getUploadIndex=function(k,l){'use strict';return this.$ReactComposerMediaUploadStore15(this.getComposerData(k),l);};j.prototype.getUploads=function(k){'use strict';return this.getComposerData(k).uploads;};j.prototype.getUploadsOfType=function(k,l){'use strict';var m=this.getComposerData(k).uploads.filter(function(n){return (n.mediaType===l);});return m;};j.prototype.getUploadsCount=function(k,l){'use strict';if(!l)return this.getComposerData(k).uploads.size;return this.getComposerData(k).uploads.filter(function(m){return m.mediaType===l;}).size;};j.prototype.getHasUploadBeenRemoved=function(k,l){'use strict';var m=this.getComposerData(k);return m.removedIDs.has(l);};j.prototype.isUploading=function(k){'use strict';return this.getComposerData(k).uploads.some(function(l){return (l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_FAILED&&l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE&&l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED);});};j.prototype.getTotalNumberOfStickersOnPhotos=function(k){'use strict';var l=0;this.getComposerData(k).uploads.forEach(function(m){var n=m.get('originalPhotoID');if(n)l+=c('PhotoEditorSaveStates').getTotalNumOfStickersOnPhoto(n);});return l;};j.prototype.getVideoUploader=function(k,l){'use strict';var m=this.getComposerData(k);if(!m.videoUploader){var n=new (c('ReactComposerVideoXUploader'))({composerID:k,uploaderParams:l});m.videoUploader=n;}return m.videoUploader;};j.prototype.$ReactComposerMediaUploadStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','mediaType','uploadID','filename','fileURL','index','xyTags','isSpherical']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7];this.$ReactComposerMediaUploadStore16(m,r,new (c('ReactComposerPhotoUpload'))({id:o,mediaType:n,state:c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_ENQUEUED,filename:p,fileURL:q,xyTags:s,isSpherical:t}));this.$ReactComposerMediaUploadStore17(m);this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore17=function(k){'use strict';var l=this.getUploads(k);if(l.size>1)l.forEach(function(m){return this.$ReactComposerMediaUploadStore18(this.getComposerData(k),m.id,function(n){return n.set('isSpherical',false);});}.bind(this));};j.prototype.$ReactComposerMediaUploadStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(o,n,function(p){return p.withMutations(function(q){return q.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_STARTED).set('progress',0);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore6=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','fileUpload']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(p,n,function(q){return q.withMutations(function(r){return r.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING).set('progress',0).set('fileUpload',o);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','progress']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(p,n,function(q){return q.set('progress',o);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore9=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','photoID']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(p,n,function(q){return q.withMutations(function(r){return r.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE).set('photoID',o).set('originalPhotoID',k.originalPhotoID||o).remove('fileUpload');});});if(!k.cubestripURI)this.$ReactComposerMediaUploadStore18(p,n,function(q){return q.set('isSpherical',false);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore7=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','isSpherical']),m=l[0],n=l[1],o=l[2];this.$ReactComposerMediaUploadStore18(this.getComposerData(m),n,function(p){return p.set('isSpherical',o);});this.$ReactComposerMediaUploadStore17(m);};j.prototype.$ReactComposerMediaUploadStore10=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(o,n,function(p){return p.withMutations(function(q){return q.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED).set('error',k.error);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore11=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m),p=this.$ReactComposerMediaUploadStore15(o,n);o.uploads=o.uploads['delete'](p);o.uploadsByID=o.uploadsByID['delete'](n);for(var q=p;q<o.uploads.size;q++){var r=o.uploads.get(q).id;o.uploadsByID=o.uploadsByID.set(r,q);}o.removedIDs=o.removedIDs.add(n);this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore8=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','thumbSrc']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore18(p,n,function(q){return q.set('thumbSrc',o);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore5=function(k,l){'use strict';var m=this.validateAction(k,['composerID','uploadID']),n=m[0],o=m[1];this.$ReactComposerMediaUploadStore19(n,o,l);this.emitChange(n);};j.prototype.$ReactComposerMediaUploadStore12=function(k){'use strict';var l=this.validateAction(k,['composerID','from','to']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.uploads=p.uploads.splice(n,1).splice(o,0,p.uploads.get(n));p.uploadsByID=p.uploads.groupBy(function(q,r){return r;}).toMap().map(function(q){return q.first().id;}).flip();this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore13=function(k){'use strict';var l=this.validateAction(k,['composerID','photos']),m=l[0],n=l[1];n.forEach(function(o,p){this.$ReactComposerMediaUploadStore16(m,p,new (c('ReactComposerPhotoUpload'))({id:o.uploadID,photoID:o.photoID,mediaType:c('ReactComposerMediaUploadType').PHOTO,originalPhotoID:o.photoID,state:c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE}));}.bind(this));this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore19=function(k,l,m){'use strict';var n=this.getComposerData(k);this.$ReactComposerMediaUploadStore18(n,l,function(o){return o.set('state',m);});};j.prototype.$ReactComposerMediaUploadStore18=function(k,l,m){'use strict';var n=this.$ReactComposerMediaUploadStore20(k,l),o=n[0],p=n[1];k.uploads=k.uploads.set(p,m(o,p));};j.prototype.$ReactComposerMediaUploadStore20=function(k,l){'use strict';var m=this.$ReactComposerMediaUploadStore15(k,l);return [k.uploads.get(m),m];};j.prototype.$ReactComposerMediaUploadStore15=function(k,l){'use strict';var m=k.uploadsByID.get(l);if(m===undefined)throw new Error('Upload '+l+' hasn\'t been registered');return m;};j.prototype.$ReactComposerMediaUploadStore14=function(k,l){'use strict';var m=this.$ReactComposerMediaUploadStore15(k,l);return k.uploads.get(m);};j.prototype.$ReactComposerMediaUploadStore1=function(k){'use strict';if(c('ReactComposerMediaUploadActionType')[k.type]){var l=k.composerID,m=k.uploadID;if(m==null)return false;return this.getHasUploadBeenRemoved(l,m);}return false;};j.prototype.$ReactComposerMediaUploadStore16=function(k,l,m){'use strict';var n=this.getComposerData(k);n.uploads=n.uploads.splice(l,0,m);for(var o=l;o<n.uploads.size;o++){var p=n.uploads.get(o).id;n.uploadsByID=n.uploadsByID.set(p,o);}};f.exports=new j();},null);
__d('MultimediaUploadProcessingDialog.react',['fbt','React','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MultimediaUploadProcessingDialog',propTypes:{numOfVideos:i.number.isRequired},getInitialState:function(){return {dialogShown:true};},componentWillReceiveProps:function(k){if(k.show)this.setState({dialogShown:true});},_getProcessingText:function(){return this.props.numOfVideos===1?h._("The video in your post is being processed. We'll send you a notification when it's finished and your post is ready to view."):h._("The videos in your post are being processed. We'll send you a notification when they've finished and your post is ready to view.");},_getTitle:function(){return h._("Processing videos");},render:function(){return (c('React').createElement(c('XUIDialog.react'),{shown:this.state.dialogShown,width:400},c('React').createElement(c('XUIDialogTitle.react'),null,this._getTitle()),c('React').createElement(c('XUIDialogBody.react'),null,this._getProcessingText())));}});f.exports=j;},null);
__d('ReactComposerMediaFilterUtils',['ComposerXNativeAudioUploadsConfig','VideoUploadConfig'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={hasVideos:function(i){return this.filterVideos(i).length>0;},hasAudioFiles:function(i){return this.filterAudioFiles(i).length>0;},filterVideos:function(i){return this.filterFileOfSupportedType(i,c('VideoUploadConfig').videoExtensions);},filterAudioFiles:function(i){return this.filterFileOfSupportedType(i,c('ComposerXNativeAudioUploadsConfig').audioExtensions);},filterFileOfSupportedType:function(i,j){return i.filter(function(k){var l=k.indexOf('.')!==-1?k.split('.').pop().toLowerCase():'';return j[l];});}};f.exports=h;},null);
__d('ReactComposerVideoXUploader',['invariant','ReactComposerEvents','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerMediaFilterUtils','ReactComposerMediaUploadActionType','VideoUploader','VideoUploadProgressBar','Arbiter','DOM','JSLogger','PhotosUploadID','SubscriptionsHandler','VideoUploadFile','MultimediaUploadProcessingDialog.react','React','ReactDOM','throttle'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=250;function j(k){this.$ReactComposerVideoXUploader3=k;this.$ReactComposerVideoXUploader2=new (c('SubscriptionsHandler'))();this.$ReactComposerVideoXUploader6=0;!k.composerID?h(0):void 0;!k.uploaderParams?h(0):void 0;this.$ReactComposerVideoXUploader2.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+k.composerID,c('throttle')(this.$ReactComposerVideoXUploader7,i,this)),c('Arbiter').subscribe(c('ReactComposerEvents').POST_STARTED+k.composerID,c('throttle')(this.$ReactComposerVideoXUploader8,i,this)));this.$ReactComposerVideoXUploader1=k.composerID;this.$ReactComposerVideoXUploader4=k.uploaderParams;this.$ReactComposerVideoXUploader5=c('JSLogger').create('composer');}j.prototype.upload=function(k){k.forEach(function(l){if(!c('ReactComposerMediaFilterUtils').hasVideos([l.name]))return;if(!l.uploadID)l.uploadID=c('PhotosUploadID').getNewID();this.$ReactComposerVideoXUploader9({uploadID:l.uploadID,fileName:l.name,fileURL:URL.createObjectURL(l)});this.uploadVideo(l);}.bind(this));};j.prototype.uploadVideo=function(k){var l=JSON.parse(JSON.stringify(this.$ReactComposerVideoXUploader4)),m=new (c('VideoUploader'))(l),n=c('VideoUploadFile').fromFile(k);this.$ReactComposerVideoXUploader2.addSubscriptions(m.subscribe('upload-started',this.$ReactComposerVideoXUploader10.bind(this,k)),m.subscribe('upload-progressed',this.$ReactComposerVideoXUploader11.bind(this,k)),m.subscribe('upload-failed',this.$ReactComposerVideoXUploader12.bind(this,k)),m.subscribe('upload-finished',this.$ReactComposerVideoXUploader13.bind(this,k)));try{m.upload(n);}catch(o){this.$ReactComposerVideoXUploader5.error('error_send_unpublished_files',o);throw o;}};j.prototype.$ReactComposerVideoXUploader9=function(k){c('ReactComposerMediaUploadActions').enqueue(this.$ReactComposerVideoXUploader1,k.uploadID,k.fileName,c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerVideoXUploader1).size,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').VIDEO,k.fileURL);};j.prototype.$ReactComposerVideoXUploader10=function(k,l){c('ReactComposerMediaUploadActions').startUploading(this.$ReactComposerVideoXUploader1,k.uploadID,k,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_UPLOADING);};j.prototype.$ReactComposerVideoXUploader11=function(k,l,m){var n=c('VideoUploadProgressBar').computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);c('ReactComposerMediaUploadActions').progressUploading(this.$ReactComposerVideoXUploader1,k.uploadID,Math.round(n));};j.prototype.$ReactComposerVideoXUploader13=function(k,l,m){c('ReactComposerMediaUploadActions').doneUploading(this.$ReactComposerVideoXUploader1,k.uploadID,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_DONE,k,0,m.video_id,'');};j.prototype.$ReactComposerVideoXUploader12=function(k,l,m){var n={code:m.error_code,description:m.error_description,summary:m.error_summary,transient:m.error_is_transient};c('ReactComposerMediaUploadActions').failUploading(this.$ReactComposerVideoXUploader1,k.uploadID,k,0,n,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_FAILED);};j.prototype.$ReactComposerVideoXUploader7=function(){var k=c('DOM').create('div');c('DOM').appendContent(document.body,k);if(this.$ReactComposerVideoXUploader6>0)c('ReactDOM').render(c('React').createElement(c('MultimediaUploadProcessingDialog.react'),{numOfVideos:this.$ReactComposerVideoXUploader6}),k);};j.prototype.$ReactComposerVideoXUploader8=function(){this.$ReactComposerVideoXUploader6=c('ReactComposerMediaUploadStore').getUploadsCount(this.$ReactComposerVideoXUploader1,c('ReactComposerMediaUploadType').VIDEO);};j.prototype.destroy=function(){this.$ReactComposerVideoXUploader2.release();};f.exports=j;},null);
__d('ReactComposerVideoUploadActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({VIDEO_SET_UPLOADER:null,VIDEO_UPLOAD_ADD:null,VIDEO_UPLOAD_REMOVE:null},'ReactComposerVideoUploadActionType');},null);
__d('ReactComposerVideoUploadStore',['ReactComposerStoreBase','ReactComposerVideoUploadActionType','immutable'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record({file:null});h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return {uploader:null,video:null};},function(m){switch(m.type){case c('ReactComposerVideoUploadActionType').VIDEO_SET_UPLOADER:l&&l.$ReactComposerVideoUploadStore1(m);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_ADD:l&&l.$ReactComposerVideoUploadStore2(m);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_REMOVE:l&&l.$ReactComposerVideoUploadStore3(m);break;default:}});l=this;}k.prototype.getUploader=function(l){'use strict';return this.getComposerData(l).uploader;};k.prototype.getVideo=function(l){'use strict';return this.getComposerData(l).video;};k.prototype.$ReactComposerVideoUploadStore1=function(l){'use strict';var m=this.validateAction(l,['composerID','uploader']),n=m[0],o=m[1],p=this.getComposerData(n);p.uploader=o;this.emitChange(n);};k.prototype.$ReactComposerVideoUploadStore2=function(l){'use strict';var m=this.validateAction(l,['composerID','file']),n=m[0],o=m[1],p=this.getComposerData(n);p.video=new j({file:o});this.emitChange(n);};k.prototype.$ReactComposerVideoUploadStore3=function(l){'use strict';var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);n.video=null;n.input&&n.input.clear();this.emitChange(m);};f.exports=new k();},null);